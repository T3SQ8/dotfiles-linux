#!/bin/sh

for file do
	noext=${file%.*}
	dirpath=${noext%/*}
	noext_nopath=${dirpath##*/}
	ext=${file##*.}
	case $ext in
		roff)
			groff -e -ms "$file" -Tpdf > "$noext.pdf" ;;
		#tex)
		#	pdflatex "$file" &&
		#		{ [ -f "$noext.bib" ] && biber "$noext" && pdflatex "$file" ;} &&
		#		pdflatex "$file"
		#	;;

		md)
			pandoc "$file" -o "$noext.html" ;;
		c)
			gcc "$file" -o "$noext" ;;
		*)
			[ -f Makefile ] && make || { echo "$file: Unknown filetype" ; exit 1 ;} ;;
	esac
done
